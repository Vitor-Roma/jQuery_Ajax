<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Jquery - Ajax</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/icheck-bootstrap/3.0.1/icheck-bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-sweetalert/1.0.1/sweetalert.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/css/adminlte.min.css">
    <script src="https://code.jquery.com/jquery-1.9.1.js"></script>
    <style>
        body{
            font-size: 17px;
            font-family: arial;
            background: #f4f4f4;
            line-height: 1.5em;
        }
        h1{
            background:#333;
            color:#fff;
            padding:20px;
            text-align: center;
            border-bottom: 4px #000 solid;
            margin-bottom: 10px;
        }
        span{
            background:black;
            color:red;
        }
        #container{
            width:90%;
            margin:auto;
            padding:10px;
        }
         .jsgrid-pager-page {
            padding: 0.2em 0.6em;
            }
        .jsgrid-pager-nav-button {
            padding: 0.2em 0.6em;
            }
        .padding-left{
            padding-left: 7.5px;
            }
        .errorlist{
            color:red;
            font-weight:bold;
            }









    </style>
</head>
<body class="">
<!-- Navbar -->
<nav class="main-header navbar navbar-expand navbar-white navbar-light">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
            <a href='' class="nav-link">Dashboard</a>
        </li>
    </ul>
</nav>
<!-- Main Sidebar Container -->
<aside class="main-sidebar sidebar-dark-primary elevation-4">
    <!-- Brand Logo -->
    <a href='http://127.0.0.1:8000/api' class="brand-link">
        <!--            <img src="" alt="Logo agency" class="brand-image img-circle elevation-3" style="opacity: .8">-->
        <span class="brand-text font-weight-light">iRating</span>
    </a>

    <!-- Sidebar -->
    <div class="sidebar">
        <!-- Sidebar user (optional) -->
        <div class="user-panel mt-3 pb-3 mb-3 d-flex">
            <div class="image">
                <!--                    <img src="" class="img-circle elevation-2" alt="User Image">-->
            </div>
            <div class="info">
                <a class="d-block" href="">Home</a>
                <br>
                <a id="themeSwitcher" class="d-block">Switch Theme Dark/Light</a>
            </div>
        </div>

        <!-- Sidebar Menu -->
        <nav class="mt-2">
            <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu"
                data-accordion="false">
                <!-- Add icons to the links using the .nav-icon class
                     with font-awesome or any other icon font library -->
                <li class="nav-header">Tabelas</li>
                <li class="nav-item">
                    <a class="nav-link" id="btn1">
                        <i class="nav-icon fas fa-money-check-alt"></i>
                        <p>
                            All products
                        </p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="btn2">
                        <i class="nav-icon fas fa-money-check-alt"></i>
                        <p>
                            Products names
                        </p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="btn3">
                        <i class="nav-icon fas fa-money-check-alt"></i>
                        <p>
                            Products pictures
                        </p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="btn4">
                        <i class="nav-icon fas fa-money-check-alt"></i>
                        <p>
                            All restaurants
                        </p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="btn5">
                        <i class="nav-icon fas fa-money-check-alt"></i>
                        <p>
                            Restaurants names
                        </p>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="btn6">
                        <i class="nav-icon fas fa-money-check-alt"></i>
                        <p>
                            Restaurants images
                        </p>
                    </a>
                </li>
            </ul>
        </nav>
        <!-- /.sidebar-menu -->
    </div>
    <!-- /.sidebar -->
</aside>
<main data-theme="dark">
    <div class="content-wrapper">
        <section class="content-header">
            <div class="container-fluid">
                <div class="row mb-2">
                    <div class="col-sm-6">
                        <h1>GET and <span id="post">POST</span> iRating API
                        </h1>
                        <br>
                        <div id="container">
                            <label>Restaurant Name</label>
                            <input type="text" placeholder="restaurant name" id="pname">
                            <br>
                            <label>Restaurant Link</label>
                            <input type="text" placeholder="restaurant detail" id="plink">
                            <br>
                            <br>
                            <h3>Click on the red 'POST' to send</h3>
                        </div>
                    </div>
                    <div class="col-sm-6">
                        <ol class="breadcrumb float-sm-right">
                            <li><input type="text" placeholder="username" id="username1"></li>
                            <li><input type="password" placeholder="password" id="password1"></li>
                            <li class="breadcrumb-item" id="login">Login</li>

                            <li class="breadcrumb-item active"></li>

                        </ol>
                    </div>
                </div>
            </div>
            <!-- /.container-fluid -->
        </section>

    </div>
</main>

<script>
     $(document).ready(function(){
        var pname = $('#pname').val();
        var plink = $('#plink').val();
        token = ''
        sessiontoken = ''
        $('#btn1').click(function(){
            $('div#container').empty();
            $('div#container').append('<h2> List of all Products </h2>'+'<br>')
            $.get('http://127.0.0.1:8000/api/products/').done(function(data){
                $.map(data, function(product, i){
                    $('div#container').append(
                    '<p>'+product.restaurant.name+'</p>'+
                    '<p>'+product.name+'</p>'+
                    '<p>'+product.detail+'</p>'+
                    '<p>'+product.price+'</p>'+
                    '<img src="' + product.picture + '" />'+
                    '<br>')
                });
            });
        });
        $('#btn2').click(function(){
            $('div#container').empty();
            $('div#container').append('<h2> List of Products names</h2>'+'<br>')
            $.get('http://127.0.0.1:8000/api/products/').done(function(data){
            $.map(data, function(product, i){
                    $('div#container').append('<p>'+product.name+'</p>')
                });
            });
        });
        $('#btn3').click(function(){
            $('div#container').empty();
            $('div#container').append('<h2> List of Products pictures</h2>'+'<br>')
            $.get('http://127.0.0.1:8000/api/products/').done(function(data){
            $.map(data, function(product, i){
                    $('div#container').append('<img src=' + product.picture+">")
                });
            });
        });
        $('#btn4').click(function(){
            $('div#container').empty();
            $('div#container').append('<h2> List of all Restaurants</h2>'+'<br>')
            $.get('http://127.0.0.1:8000/api/restaurants/').done(function(data){
            $.map(data, function(product, i){
                    $('div#container').append(
                    '<img src="' + product.picture + '" />'+
                    '<p>'+product.name+'</p>'+
                    '<p>'+product.link+'</p>'+
                    '<br>')
                });
            });
        });
        $('#btn5').click(function(){
            $('div#container').empty();
            $('div#container').append('<h2> List of Restaurants names</h2>'+'<br>')
            $.get('http://127.0.0.1:8000/api/restaurants/').done(function(data){
            $.map(data, function(product, i){
                    $('div#container').append('<p>'+product.name+'</p>')
                });
            });
        });
        $('#btn6').click(function(){
            $('div#container').empty();
            $('div#container').append('<h2> List of Restaurant pictures</h2>'+'<br>')
            $.get('http://127.0.0.1:8000/api/restaurants/').done(function(data){
            $.map(data, function(product, i){
                    $('div#container').append('<img src=' + product.picture+">")
                });
            });
        });
        $('#login').click(function(){
            let usernamelogin = $('#username1').val();
            let passwordlogin = document.getElementById("password1").value;
            $.ajax({
                url: "http://127.0.0.1:8000/api/login/",
                method: 'POST',
                data: {username:usernamelogin, password:passwordlogin},
                success: function(data, status) {token = data.access, console.log('Logged Successfully')}
            });
            sessionStorage.setItem('token', token)
        });
        $('span#post').click(function(){
            $.ajax({
              url: "http://127.0.0.1:8000/api/restaurants/",
              method: 'POST',
              data: {name:pname, link:plink, picture:null},
              success: function(data, status) {return console.log("The returned data", data);},
              headers: {
                    'Authorization': 'Bearer ' + sessionStorage.getItem('token')
                }
            });
        });
        $('#themeSwitcher').click(function(){
            $('body').toggleClass('dark-mode')
        })
    });










</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.2.0/js/adminlte.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.8-beta.17/jquery.inputmask.min.js"></script>
</body>
</html>